/**
 * @author minimus
 * @copyright 2010 - 2013
 */
(function(n){n(document).ready(function(){var y,rt,o,it,u,ft,c,st,s,ot,l,et,e,b,h,tt,f,g,p,d,v,nt,a,k;n("#title").tooltip({track:!0});var t=n.parseJSON(n.ajax({url:ajaxurl,data:{action:"get_strings"},async:!1,dataType:"jsonp"}).responseText),ct=n("#upload-file-button"),w=n("#uploading"),ht=n("#uploading-help"),ut=n("#load_img"),r,lt="",at=new AjaxUpload(ct,{action:ajaxurl,name:"uploadfile",data:{action:"upload_ad_image"},onSubmit:function(n,i){if(!(i&&/^(jpg|png|jpeg|gif|swf)$/.test(i)))return w.text(t.status),!1;ut.show(),w.text(t.uploading)},onComplete:function(i,r){w.text(""),ut.hide(),n('<div id="files"></div>').appendTo(ht),r=="success"?(n("#files").text(t.file+" "+i+" "+t.uploaded).addClass("updated").delay(3e3).fadeOut(1e3,function(){n(this).remove()}),n("#editor_mode").val()=="item"&&n("#ad_img").val(t.url+i),n("#editor_mode").val()=="place"&&n("#patch_img").val(t.url+i)):n("#files").text(i+" "+r).addClass("error").delay(3e3).fadeOut(1e3,function(){n(this).remove()})}});if(n("#editor_mode").val()=="item"){r=samPointer.ads,r.pointer="ads",n("#ad_start_date, #ad_end_date").datepicker({dateFormat:"yy-mm-dd",showButtonPanel:!0}),n("#adv_nick").combogrid({url:ajaxurl+"?action=get_combo_data",datatype:"json",munit:"px",alternate:!0,colModel:t.users.colModel,select:function(t,i){return n("#adv_nick").val(i.item.slug),n("#adv_name").val(i.item.title),n("#adv_mail").val(i.item.email),!1}});function i(t,i,r,u,f,e,o){var s=u.val(),h;i.w2grid({name:t,show:{selectColumn:!0},multiSelect:!0,columns:e,records:o,onSelect:function(n){n.onComplete=function(){for(var e="",r=this.getSelection(),i,t,n=0;n<r.length;n++)t=this.get(r[n]),i=f=="id"?t.id:t.slug,e+=n==r.length-1?i:i+",";u.val(e)}},onUnselect:function(n){n.onComplete=function(){for(var e="",r=this.getSelection(),i,t,n=0;n<r.length;n++)t=this.get(r[n]),i=f=="id"?t.id:t.slug,e+=n==r.length-1?i:i+",";u.val(e)}}}),null!=s&&""!=s&&(h=s.split(","),n.each(h,function(i,r){n.each(o,function(n,i){var u=f=="id"?i.id:i.slug;return u==r?(w2ui[t].select(i.recid),!1):!0})}))}y=n("#ctt-grid"),rt=n("#view-custom-tax-terms"),i("ctt-grid",y,"view-custom-tax-terms",rt,"slug",t.custom_taxes.columns,t.custom_taxes.taxes),o=n("#posts-grid"),it=n("#view_id"),i("posts-grid",o,"view_id",it,"id",t.posts.columns,t.posts.posts),u=n("#users-grid"),ft=n("#x_view_users"),i("users-grid",u,"x_view_users",ft,"slug",t.users.columns,t.users.users),c=n("#x-posts-grid"),st=n("#x_view_id"),i("x-posts-grid",c,"x_view_id",st,"id",t.posts.columns,t.posts.posts),s=n("#cats-grid"),ot=n("#view_cats"),i("cats-grid",s,"view_cats",ot,"slug",t.cats.columns,t.cats.cats),l=n("#x-cats-grid"),et=n("#x_view_cats"),i("x-cats-grid",l,"x_view_cats",et,"slug",t.cats.columns,t.cats.cats),e=n("#auth-grid"),b=n("#view_authors"),i("auth-grid",e,"view_authors",b,"slug",t.authors.columns,t.authors.authors),h=n("#x-auth-grid"),tt=n("#x_view_authors"),i("x-auth-grid",h,"x_view_authors",tt,"slug",t.authors.columns,t.authors.authors),f=n("#tags-grid"),g=n("#view_tags"),i("tags-grid",f,"view_tags",g,"slug",t.tags.columns,t.tags.tags),p=n("#x-tags-grid"),d=n("#x_view_tags"),i("x-tags-grid",p,"x_view_tags",d,"slug",t.tags.columns,t.tags.tags),v=n("#cust-grid"),nt=n("#view_custom"),i("cust-grid",v,"view_custom",nt,"slug",t.customs.columns,t.customs.customs),a=n("#x-cust-grid"),k=n("#x_view_custom"),i("x-cust-grid",a,"x_view_custom",k,"slug",t.customs.columns,t.customs.customs),n("#tabs").tabs({activate:function(t,i){var r=i.newPanel[0].id;r=="tabs-1"&&o.w2render("posts-grid"),r=="tabs-2"&&(n("#rc-ctt").is(":visible")&&y.w2render("ctt-grid"),n("#rc-xid").is(":visible")&&c.w2render("x-posts-grid"),n("#x-view-users").is(":visible")&&u.w2render("users-grid"),n("#rc-ac").is(":visible")&&s.w2render("cats-grid"),n("#rc-xc").is(":visible")&&l.w2render("x-cats-grid"),n("#rc-au").is(":visible")&&e.w2render("auth-grid"),n("#rc-xa").is(":visible")&&h.w2render("x-auth-grid"),n("#rc-at").is(":visible")&&f.w2render("tags-grid"),n("#rc-xt").is(":visible")&&p.w2render("x-tags-grid"),n("#rc-cu").is(":visible")&&v.w2render("cust-grid"),n("#rc-xu").is(":visible")&&a.w2render("x-cust-grid"))}}),n("#add-file-button").click(function(){var i=t.url+n("select#files_list option:selected").val();return n("#ad_img").val(i),!1}),n("#code_mode_false").click(function(){n("#rc-cmf").show("blind",{direction:"vertical"},500),n("#rc-cmt").hide("blind",{direction:"vertical"},500)}),n("#code_mode_true").click(function(){n("#rc-cmf").hide("blind",{direction:"vertical"},500),n("#rc-cmt").show("blind",{direction:"vertical"},500)}),n("input:radio[name=view_type]").click(function(){var t=n("input:radio[name=view_type]:checked").val();switch(t){case"0":n("#rc-vt0").is(":hidden")&&n("#rc-vt0").show("blind",{direction:"vertical"},500),n("#rc-vt2").is(":visible")&&n("#rc-vt2").hide("blind",{direction:"vertical"},500);break;case"1":n("#rc-vt0").is(":visible")&&n("#rc-vt0").hide("blind",{direction:"vertical"},500),n("#rc-vt2").is(":visible")&&n("#rc-vt2").hide("blind",{direction:"vertical"},500);break;case"2":n("#rc-vt0").is(":visible")&&n("#rc-vt0").hide("blind",{direction:"vertical"},500),n("#rc-vt2").is(":hidden")&&n("#rc-vt2").show("blind",{direction:"vertical"},500,function(){o.w2render("posts-grid")})}}),n("input:radio[name=ad_users]").click(function(){var t=n("input:radio[name=ad_users]:checked").val();t=="0"?n("#custom-users").is(":visible")&&n("#custom-users").hide("blind",{direction:"vertical"},500):n("#custom-users").is(":hidden")&&n("#custom-users").show("blind",{direction:"vertical"},500,function(){n("#x-view-users").is(":visible")&&u.w2render("users-grid")})}),n("#ad_users_reg").click(function(){n("#ad_users_reg").is(":checked")?n("#x-reg-users").show("blind",{direction:"vertical"},500,function(){n("#x-view-users").is(":visible")&&u.w2render("users-grid")}):n("#x-reg-users").hide("blind",{direction:"vertical"},500)}),n("#x_ad_users").click(function(){n("#x_ad_users").is(":checked")?n("#x-view-users").show("blind",{direction:"vertical"},500,function(){u.w2render("users-grid")}):n("#x-view-users").hide("blind",{direction:"vertical"},500)}),n("#ad_swf").click(function(){n("#ad_swf").is(":checked")?n("#swf-params").show("blind",{direction:"vertical"},500):n("#swf-params").hide("blind",{direction:"vertical"},500)}),n("#x_id").click(function(){n("#x_id").is(":checked")?n("#rc-xid").show("blind",{direction:"vertical"},500,function(){c.w2render("x-posts-grid")}):n("#rc-xid").hide("blind",{direction:"vertical"},500)}),n("#ad_cats").click(function(){n("#ad_cats").is(":checked")?(n("#rc-ac").show("blind",{direction:"vertical"},500,function(){s.w2render("cats-grid")}),n("#acw").show("blind",{direction:"vertical"},500)):(n("#rc-ac").hide("blind",{direction:"vertical"},500),n("#acw").hide("blind",{direction:"vertical"},500))}),n("#x_cats").click(function(){n("#x_cats").is(":checked")?n("#rc-xc").show("blind",{direction:"vertical"},500,function(){l.w2render("x-cats-grid")}):n("#rc-xc").hide("blind",{direction:"vertical"},500)}),n("#ad_custom_tax_terms").click(function(){n("#ad_custom_tax_terms").is(":checked")?n("#rc-ctt").show("blind",{direction:"vertical"},500,function(){y.w2render("ctt-grid")}):n("#rc-ctt").hide("blind",{direction:"vertical"},500)}),n("#ad_authors").click(function(){n("#ad_authors").is(":checked")?(n("#rc-au").show("blind",{direction:"vertical"},500,function(){e.w2render("auth-grid")}),n("#aaw").show("blind",{direction:"vertical"},500)):(n("#rc-au").hide("blind",{direction:"vertical"},500),n("#aaw").hide("blind",{direction:"vertical"},500))}),n("#x_authors").click(function(){n("#x_authors").is(":checked")?n("#rc-xa").show("blind",{direction:"vertical"},500,function(){h.w2render("x-auth-grid")}):n("#rc-xa").hide("blind",{direction:"vertical"},500)}),n("#ad_tags").click(function(){n("#ad_tags").is(":checked")?(n("#rc-at").show("blind",{direction:"vertical"},500,function(){f.w2render("tags-grid")}),n("#atw").show("blind",{direction:"vertical"},500)):(n("#rc-at").hide("blind",{direction:"vertical"},500),n("#atw").hide("blind",{direction:"vertical"},500))}),n("#x_tags").click(function(){n("#x_tags").is(":checked")?n("#rc-xt").show("blind",{direction:"vertical"},500,function(){p.w2render("x-tags-grid")}):n("#rc-xt").hide("blind",{direction:"vertical"},500)}),n("#ad_custom").click(function(){n("#ad_custom").is(":checked")?(n("#rc-cu").show("blind",{direction:"vertical"},500,function(){v.w2render("cust-grid")}),n("#cuw").show("blind",{direction:"vertical"},500)):(n("#rc-cu").hide("blind",{direction:"vertical"},500),n("#cuw").hide("blind",{direction:"vertical"},500))}),n("#x_custom").click(function(){n("#x_custom").is(":checked")?n("#rc-xu").show("blind",{direction:"vertical"},500,function(){a.w2render("x-cust-grid")}):n("#rc-xu").hide("blind",{direction:"vertical"},500)}),n("#ad_schedule").click(function(){n("#ad_schedule").is(":checked")?n("#rc-sc").show("blind",{direction:"vertical"},500):n("#rc-sc").hide("blind",{direction:"vertical"},500)}),n("#limit_hits").click(function(){n("#limit_hits").is(":checked")?n("#rc-hl").show("blind",{direction:"vertical"},500):n("#rc-hl").hide("blind",{direction:"vertical"},500)}),n("#limit_clicks").click(function(){n("#limit_clicks").is(":checked")?n("#rc-cl").show("blind",{direction:"vertical"},500):n("#rc-cl").hide("blind",{direction:"vertical"},500)})}return n("#editor_mode").val()=="place"&&(r=samPointer.places,r.pointer="places",n("#add-file-button").click(function(){var i=t.url+n("select#files_list option:selected").val();return n("#patch_img").val(i),!1}),n("#patch_source_image").click(function(){n("#rc-psi").is(":hidden")&&n("#rc-psi").show("blind",{direction:"vertical"},500),n("#rc-psc").is(":visible")&&n("#rc-psc").hide("blind",{direction:"vertical"},500),n("#rc-psd").is(":visible")&&n("#rc-psd").hide("blind",{direction:"vertical"},500)}),n("#patch_source_code").click(function(){n("#rc-psi").is(":visible")&&n("#rc-psi").hide("blind",{direction:"vertical"},500),n("#rc-psc").is(":hidden")&&n("#rc-psc").show("blind",{direction:"vertical"},500),n("#rc-psd").is(":visible")&&n("#rc-psd").hide("blind",{direction:"vertical"},500)}),n("#patch_source_dfp").click(function(){n("#rc-psi").is(":visible")&&n("#rc-psi").hide("blind",{direction:"vertical"},500),n("#rc-psc").is(":visible")&&n("#rc-psc").hide("blind",{direction:"vertical"},500),n("#rc-psd").is(":hidden")&&n("#rc-psd").show("blind",{direction:"vertical"},500)})),(r.enabled||""==n("#title").val())&&n("#title").pointer({content:"<h3>"+r.title+"</h3><p>"+r.content+"</p>",position:"top",close:function(){n.ajax({url:ajaxurl,data:{action:"close_pointer",pointer:r.pointer},async:!0})}}).pointer("open"),n("#is_singular").click(function(){n("#is_singular").is(":checked")&&n("#is_single, #is_page, #is_attachment, #is_posttype").attr("checked",!0)}),n("#is_single, #is_page, #is_attachment, #is_posttype").click(function(){!n("#is_singular").is(":checked")||n("#is_single").is(":checked")&&n("#is_page").is(":checked")&&n("#is_attachment").is(":checked")&&n("#is_posttype").is(":checked")?!n("#is_singular").is(":checked")&&n("#is_single").is(":checked")&&n("#is_posttype").is(":checked")&&n("#is_page").is(":checked")&&n("#is_attachment").is(":checked")&&n("#is_singular").attr("checked",!0):n("#is_singular").attr("checked",!1)}),n("#is_archive").click(function(){n("#is_archive").is(":checked")&&n("#is_tax, #is_category, #is_tag, #is_author, #is_date, #is_posttype_archive").attr("checked",!0)}),n("#is_tax, #is_category, #is_tag, #is_author, #is_date, #is_posttype_archive").click(function(){!n("#is_archive").is(":checked")||n("#is_tax").is(":checked")&&n("#is_category").is(":checked")&&n("#is_posttype_archive").is(":checked")&&n("#is_tag").is(":checked")&&n("#is_author").is(":checked")&&n("#is_date").is(":checked")?!n("#is_archive").is(":checked")&&n("#is_tax").is(":checked")&&n("#is_category").is(":checked")&&n("#is_posttype_archive").is(":checked")&&n("#is_tag").is(":checked")&&n("#is_author").is(":checked")&&n("#is_date").is(":checked")&&n("#is_archive").attr("checked",!0):n("#is_archive").attr("checked",!1)}),!1})})(jQuery);